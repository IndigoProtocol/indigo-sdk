import {
  applyParamsToScript,
  ScriptType,
  SpendingValidator,
} from '@lucid-evolution/lucid';
import { castLrpParams, LRPParams } from '../types/indigo/lrp';
import { fromSystemParamsAsset, LrpParamsSP } from '../types/system-params';

/*Automatically generated by the ctl-export.sh script in aiken smart contracts repository*/
const lrpValidatorData = {
  type: 'PlutusV2' as ScriptType,
  description: 'Generated by Aiken',
  cborHex:
    '5917845917810100003232323232323232322223232323232322533300b323232533300e3008301137540022646464646464646464646464646464646464646464646464646464a666052604a0342646464646464646464646464a666074607a004264a66606c606060726ea80044c8c94ccc0f4c1000084c8c8c8c94ccc0f0c0e0c0fcdd50008991919299981f981d98211baa00113253330403302249110496e636f727265637420694173736574003371e6eb8c0acc110dd50049bae30253044375407c264a666082666444646604e921124861766520746f207573652072656465656d005333045301f3048375460906466600200203697bdb180103d87980000101a000222533304d002100113330030033050002323232533304b3375e606c609e6ea8c0d8c13cdd5181818279baa00300a1323232533304e304a001132533304f533304f00614a2266609e94528251153305149012343616e20757365206f6e6c7920612073696e676c652052656465656d20706572205478001613376066609e94530103d87a80004c0103d8798000374c6601600a0026eb4c154c148dd50018a99982718240008991919191919299982a299982a19982a19b8f375c60b6008024941288a51153330543330543375e004036941288a5113330543375e022002941288a9982b2492452656465656d417578207573657320696e636f727265637420617373657420737461747300161337606660a801698103d87a80004c0103d8798000374c6602001400a60b460b600460b200260b200260b060b00046eb4c158004c148dd50018a998282492d4578706563746564206f6e6c792052656465656d2072656465656d65727320666f72204c525020696e7075747300163050375400460880026604c606c609e6ea800c0644010dd59827001981198261baa304c002304f00214a2266608a9452825122323300100100322533304d00113304e337606ea000ccc125264c0103d87980004bd6f7b6300991919192999826181e299982619b8800700214c103d87980001533304c3371000400e2980103d87b800014c103d87a8000133052337606ea001ccc135264c103d87980000051533304c3370e00e004264a66609a609260a06ea80044cc14ccdd81ba80083304e32498c150c144dd5000a60103d8798000004100453304e49126436f6e74696e75696e67206f75747075747320646f75626c6520736174697366616374696f6e0016133052337606ea0008cc134005300103d87980003300600600332498c13c00cdd6982680118288011827800981618229baa004375c6058608a6ea8028c004c114dd50050999999981082000280100201f804180098229baa00a14a0460906092609260926092609260926092609260920022940c118c10cdd50008b1980e00780a981418209baa302230413754002608660806ea800458cc0600400b4c0580e0c94ccc0e8c0d8c0f4dd500089820981f1baa001132533303b32533303c3036303f3754002266e24dd6981098201baa002375a608660806ea800454cc0f924124496e636f7272656374207472616e73616374696f6e2076616c69646974792072616e676500163026303f37546040607e6ea802854cc0f52401174f7261636c652063616e27742062652065787069726564001613026303f37540026464004a666076606e607c6ea80044c8c8c8c94ccc110c11c0084c926303a00316375a608a002608a0046086002607e6ea800458c048c078c0f8dd5180f981f1baa325333040001153303d49012145787065637465642065786163746c79206f6e65206f7261636c6520696e707574001615333040304300113042001153303d49012145787065637465642065786163746c79206f6e65206f7261636c6520696e707574001633301300d3041303e37546082607c6ea8005300103d8798000301e303d375400464a666072606a60786ea80084c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c94ccc168c1740084c8c8c8c8c8c8c8c8c8c8c8c926325333061305d001132325333068306b002149858dd7183480098329baa00d15333061305b001153330663065375401a2930b0b18319baa00c305a00f30590103058011305701230560133055014305401530530163052017301e018325333056305200113232533305d3060002132498c14c00458c178004c168dd500d0a99982b182800089919299982e983000109924ca6660b060a860b66ea80044c8c94ccc17cc1880084c9263022001163060001305c37540022c2c60bc00260b46ea806858c160dd500c8b182d800982d80119299982c182b8008a9998299826982b0008a5115333053304f305600114a02c2c6ea8c164004c164008c15c004c15c008c154004c154008c14c004c14c008c144004c144008c13c004c13c008c134004c134008c12c004c12c008c124004c124008c11c004c11c008c114004c114008c10c004c10c008dd71820800981e9baa00216253330393035303c3754002264646464a666084608a0042930b1bae30430013043002375c6082002607a6ea80045858c0f8004c0e8dd50008b1806980c981c9baa301a303937540022c607600266601800c6030606e6ea80c9300103d879800037566072607460740046070002607060706070607060700046eb0c0d8004c0d8008dd6181a000981a0011bac3032001302e375403c6eb4c0c0c0b4dd50130a999814981180d099191919191919191919191919191919299981c981a981e1baa0011323232533303c3038303f375400226464a66607c607460826ea80044c8c94ccc114c1200084c94ccc104c0f4c110dd500089929998211981224810c57726f6e6720696173736574003371e0286eb8c09cc118dd50200a999821198122491e52656465656d207574786f2066726f6d2077726f6e672061646472657373003375e605a608c6ea8c0b4c118dd5181398231baa006302d30463754010266666660440820120020100800240222940528182418229baa001163301e00b01616375a608c00260846ea800458cc06004401cc10cc100dd50008b1980c0040079812981f1baa301f303e37540026080607a6ea800458cc0540140a8c04c0d4dd5981e981f181f181f181f181f181f181f0011bac303c001303c303c00237586074002606c6ea8098c0e0c0e4008c0dc004c0dc008dd7181a800981a801181980098198011bad3031001302d375404c264a66605460460362646601a92011754582069736e74207369676e6564206279206f776e657200330023758606460666066606660666066606660666066605e6ea807cdd7180b18179baa02930060281333232322232323232325333034303030373754002264a66606a605e60706ea80044c8c8c94ccc0f4c1000084c8c8c94ccc0ecc0dcc0f8dd500089980e99807998209ba937309201084d697373696e6720003304137526e60038cc104dd49b984901172075706772616465206d696e74696e6720706f6c696379004bd70249003301230103302400948900375c6084607e6ea800454cc0f4cc03ccc104dd49b98491084d697373696e6720003304137526e60038cc104dd49b9849010d20757067726164652070617468004bd70249001632533303b3035303e3754002298103d87a8000130233304137526eb8c0fcc8cdd81821800982198220009bac3042303f375400297ae0323300100137566040607e6ea800c894ccc1040045300103d87a800013232533303e3371e6eb8c1040080244c098cc110dd399822182080119822182100125eb812f5c0266008008002608a0046086002a666072606a60786ea80044c8c8c8c94ccc108c1140084c926323300100100222533304400114984c8cc00c00cc120008c8c8dd718228011bae30430013046001163756608600260860046eb4c104004c0f4dd50008b1808180e181e1baa301d303c37540022c607c00266601e00a01098103d8798000375c607860726ea800458c07cc0e0dd5180f981c1baa301930383754607660706ea800458cc040dd6181d0020129bab3039303a303a303a00237586070002607000260666ea808c88dcc991919980080080224410022253330370021001132333004004303b0035333033302f371a00426e600044cdc500119b8a00537300026e64dd7181c8011b98001300100122533303100114bd700998191817981980099801001181a000a49034c5250003015302e375405244646600200200644a66606400229404c94ccc0b8cdc79bae303500200414a2266006006002606a0024a666052604460586ea80044c0c0c0b4dd50008a99815a481134e6f7420616e20696e6c696e6520646174756d0016222323301500423002301130303754002a666054604c605a6ea800448c094ccc044dd5980818179baa001375c602c605e6ea800cdd7180818179baa00312300533301137566020605e6ea8004dd7180b18179baa003375c6020605e6ea800cdc4240004464a666050604860566ea80044c0bcc0b0dd50008a99815248117436f756c64206e6f742066696e642072656465656d6572001632323300100100322533302f00114c0103d87a80001323232533302d3375e00c60600062602a6606600297ae01330050050023030002303300230310013374a90011981680125eb8094ccc094c084c0a0dd5000899191919191919192999819181a80109924c60500062c6eb4c0cc004c0cc008c0c4004c0c4008dd7181780098178011bae302d001302937540022c44646600200200644a6660580022980103d87a80001323253330293375e6028605a6ea80080144c044cc0bc0092f5c02660080080026060004605c0026002002444a6660520042980103d87a800013232533302630220031300e3302c0024bd70099980280280099b8000348004c0b400cc0ac0088888888c8c8c94ccc0a8cc03124011e48617320746f2072656465656d206174206c6561737420746865206d696e00337126eb4c02cc0b8dd50050010a99981519806249124d617820707269636520657863656564656400337126eb4c054c0b8dd50029bad3015302e3754601c605c6ea801854ccc0a8cc0312411b52656465656d696e67206d6f7265207468616e20616c6c6f77656400337120046eb4c02cc0b8dd500309980624811757726f6e6720636f6e74696e75696e67206f75747075740033332222323300100133019005533302f302b30323754008264466ebcc070c0d4dd5180e181a9baa001002303630333754008264466ebcc070c0d4dd5000801181b18199baa00422533303500114a0264a66606264a66606466ebcc058c0d8dd5000803099299981c0008a5115333038303b001132323253330363371e6eb8c0f400d22100153330363371e00291010015333036303230393754980103d87a800015333036337129000001099b89002482026fb808528099b89480000085280a50375c6078607a0046eb4c0ecc0f0c0f0004dd6181d0008a503233001001323330010013756603260706ea800cc8cc004004020894ccc0ec00452f5bded8c02646607a66ec0dd49bae303a001374c64660020026eacc0f0008894ccc0f800452f5bded8c02646608066ec0dd49bae303d001375066e052000375a607c002660060066084004608000266006006607e004607a002444a6660760042002264666008008607e0066666604a0046eb8c0e8004dd5981d80091119299981d98140008a60103d87a80001302333041374c00297ae0323330010010030022225333042002100113233300400430460033333302d002375c60820026eb4c108004888c94ccc108c0f80045300103d87a80001302a33048375000297ae0337000040020546088004046607a00444a666072002297ae0132333222323300100100322533303f001100313233041374e660826ea4018cc104dd49bae303e0013304137506eb4c0fc0052f5c066006006608600460820026eb8c0e0004dd5981c80099801801981e801181d8008a50303800214a226600600600260700026606001097ae03374a900119818003a5eb80cdd2a400866060646460286606460660046606460660026606460666068002660646ea0cdc09bad300d3030375401000897ae03033001302e375400c97ae033330113333011330133756601e605c6ea8c03cc0b8dd5004a44100488100488100001375c601c605c6ea8028dd7180798171baa00600314a0294052819b803370266601e6eacc038c0b4dd5180718169baa00848810048810000153330293371200290000a400026eb4c050c0b4dd51808998179ba83370666e08dd6980a18169baa3300c30113302f375000297ae00034820225e8dd6980a18169baa30113302f375066e0920c8014820225e92f5c097ae0375a602660586ea8cc02cc040cc0b8dd4000a5eb8000ccdc09998069bab300c302b375400a6eb8c02cc0acdd50039bae300c302b375400666601a6eacc030c0acdd5180618159baa006375c601660566ea801cdd7180618159baa003230273028302830280012253330203330200014a094454cc0880084004400488c01ccc094dd419b83337046eb4c028c08cdd50011bad300a30233754002904044bd25eb808c090c094c0940048c08cc090004888c94ccc078c060c084dd50008a400026eb4c094c088dd500099299980f180c18109baa00114c103d87a8000132330010013756604c60466ea8008894ccc094004530103d87a8000132323253330233371e00e6eb8c09800c4c02ccc0a4dd4000a5eb804cc014014008dd698130011814801181380099198008008021129998120008a6103d87a8000132323253330223371e00e6eb8c09400c4c028cc0a0dd3000a5eb804cc014014008dd59812801181400118130009111299980e980c8008802099999805802001991900119198008008011129998128008a4c264a66604c002293099192999811980f98131baa3300f375c604c60540086eb8c0980084cc014014cc0a400800454cc0952401326b65797320696e206173736f63696174697665206c697374206172656e277420696e20617363656e64696e67206f726465720016302a0023028001302800133023337606ea4008dd4000a5eb7bdb180888c94ccc084c038004530103d87a80001300933027374c00297ae03333300f001005004222325333024302000114c103d87a80001300c3302a375000297ae0337000020040180126e95200022323300100100322533302000114bd6f7b630099191919299980f99b8f0070021003133025337606ea4008dd3000998030030019bab3022003375c60400046048004604400244646600200200644a66603e002297ae013232533301c300500213302200233004004001133004004001302300230210012301d001225333016337200040022980103d8798000153330163371e0040022980103d87a800014c103d87b80002533301900114a2294088888c8cc004004018894ccc0780044cc07ccdd81ba9006374c00a97adef6c60132323232533301d300d3300700a002133023337606ea4028dd30048028a99980e99b8f00a002132533301e301a3021375400226604866ec0dd4805981298111baa001004100433300800a009001133023337606ea4008dd3000998030030019bab3020003375c603c0046044004604000244444646600200200c44a66603a00226603c66ec0dd48031ba80054bd6f7b630099191919299980e18061980380500109981119bb037520146ea002401454ccc070cdc7805001099299980e980c98101baa001133023337606ea402cc090c084dd5000802080219980400500480089981119bb037520046ea0004cc01801800cdd6980f8019bae301d0023021002301f001375e98103d879800030123754018602a60246ea800458c050c054008c04c004c03cdd50008a4c26cac600200c464a666014600c00226464a66602260280042930b1bad3012001300e37540042a6660146008002264646464646464646464a666032603800426464649318088019808002299980a1808180b9baa007132323232533301d30200021324994ccc060c050c06cdd500189919299980f98110010a4c2c6eb8c080004c070dd50018b0b1bad301e001301e002301c0013018375400e2c2c60340026034004603000260300046eb8c058004c058008c050004c050008dd6980900098071baa0021533300a30030011533300f300e37540042930b0a99980519b874801800454ccc03cc038dd50010a4c2c2c60186ea8004dc3a40086e1d20022533300630023009375400226464a66601a60200042930b1bad300e001300a37540022c6e1d20005734ae6d5ce2ab9d5573caae7d5d02ba15745',
};

export const mkLrpValidator = (params: LRPParams): SpendingValidator => {
  return {
    type: lrpValidatorData.type,
    script: applyParamsToScript(lrpValidatorData.cborHex, [
      castLrpParams(params),
    ]),
  };
};

export const mkLrpValidatorFromSP = (
  params: LrpParamsSP,
): SpendingValidator => {
  return {
    type: lrpValidatorData.type,
    script: applyParamsToScript(lrpValidatorData.cborHex, [
      castLrpParams({
        versionRecordToken: fromSystemParamsAsset(params.versionRecordToken),
        iassetNft: fromSystemParamsAsset(params.iassetNft),
        minRedemptionLovelacesAmt: BigInt(params.minRedemptionLovelacesAmt),
        iassetPolicyId: params.iassetPolicyId.unCurrencySymbol,
      }),
    ]),
  };
};

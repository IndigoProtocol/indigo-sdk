import {
  applyParamsToScript,
  ScriptType,
  SpendingValidator,
} from '@lucid-evolution/lucid';
import {
  PollShardParamsSP,
  fromSystemParamsAsset,
} from '../types/system-params';
import {
  castPollShardParams,
  PollShardParams,
} from '../types/indigo/poll-shard';

const pollShardValidatorData = {
  type: 'PlutusV2' as ScriptType,
  description: 'Generated by Aiken',
  cborHex:
    '59166859166501000032323232323232322232323232322322533300b323232533300e300830103754002264a66601e601260226ea80344c8c8c8c8c8c8c8c8c8c94c8ccc068c054c070dd50090999191919191919191911919299981518168010991919299981698180010992999815181218161baa00113232533303030330021323232533302f3301f4911d496e76616c696420696e707574206265696e672076616c696461746564003375e042602e60646ea802854ccc0bccc07d2401225468652070726f706f73616c206578636565647320766f74696e6720706572696f64003322325333032302c30343754002264a66606664a666070606e0022a666068605c606c002294454ccc0d0c0bcc0d80045280b0b1baa301c303637546038606c6ea80104cdc4000801899b89001003375a6070606a6ea8004528180c981a1baa301a30343754004602060646ea808cdd6980898191baa0201533302f3301f49011c54686520706f6c6c206f757470757420697320696e636f7272656374003333300e3758602260646ea808cc074cc0d00252f5c0602c66068603a6606864603e6606a606c0026606a64a666062605860666ea80384c080cc0d8dd419b80375a603260686ea800400cc0e0c0d0dd5000898101981b181b981a1baa00133036375066e00dd6980d181a1baa0010034bd70180c98199baa021303730370013032375404097ae04bd701bab301830323754603060646ea8029300103d87980001533302f3301f4910e4d697865642076657273696f6e73003375e602e60646ea8c05cc0c8dd5180c18191baa007301d33034301a3032375405c97ae01533302f3301f49127546865207472616e73616374696f6e206d757374206265207369676e6564206279206f776e6572003232330010013758606e6070607060706070607060706070607060686ea8094894ccc0d8004528099299981999b8f375c607200400829444cc00c00c004c0e4004dd7180b98191baa0041533302f3301f4911a5573657220766f74656420666f7220706f6c6c206265666f72650033302f3300d002375a602e60646ea8081282511533302f3301f491124d757374206d696e74206e6f20746f6b656e003375e6e98c8cc004004dd5981b181b981b981b981b98199baa02422533303500114bd6f7b630099191919299981a980a801080189981d19bb037520046e98004cc01801800cdd5981b8019bae3035002303900230370014c0101a0001533302f3301f491245374616b696e67506f736974696f6e206d757374207570646174652070726f7065726c79003333300e3758602260646ea808cc074cc0d0c078cc0d0c074cc0d0c068c0c8dd501725eb80cc0d130103d87a80004bd7025eb80c058cc0d0c074cc0d0c8c07ccc0d4c0d8004cc0d4dd319912999819198080028010991980080080311299981c0008a5eb7bdb1804cc0e4c8c94ccc0d8cdc3800803099bb0375000200a20046eb4c0dc004c0e8004cc008008c0ec0044c8c8cc00400401c894ccc0e4004400c4cc0e8c0ec004cc008008c0f0004cc0dccdd81ba80020014bd6f7b6301bad301830333754042603e6606a6ea0008cc0d4c048c0ccdd5010a5eb80c0dcc0dc004c0c8dd500225eb812f5c06eacc060c0c8dd5180c18191baa0074c0103d87a800013301f4901275374616b696e6720506f736974696f6e206d75737420757365204c6f636b2072656465656d65720032323375e004980103d87e8000325333031302c001132325333037303a002149858dd7181c000981a1baa00215333031302b00115333035303437540042930b0a99981898168008a99981a981a1baa00214985854ccc0c4cdc3a400c00226464a66606e60740042930b1bad3038001303437540042a66606266e1d200800115333035303437540042930b0a99981899b874802800454ccc0d4c0d0dd50010a4c2c2a66606266e1d200c00115333035303437540042930b0b18191baa0013301c30173032375400e6eacc06cc0c8dd50118a5014a029405280a5014a02940528199119980a8011bae3018303337540026eb8c064c0ccdd50009bab301730313754602e60626ea8018c040c0c4dd501699192999817981498189baa001132323300100100422533303600114bd6f7b63009919299981a19b88005375a60746076606e6ea8c0dc0084cc0e4008cc0100100044cc010010004c0e8008c0e0004dd6981a98191baa00116301630313754602c60626ea8c03cc0c4dd50111bab301630303754004a666058604e605c6ea80044c8c8c8c8c8c94ccc0d8c0e40084c8c9265333033302e3035375400426464a66607260780042930b1bad303a001303637540042c6605e00646464a66606a6060606e6ea80044c8c8c8c94ccc0f4c10000852616375a607c002607c0046eb4c0f0004c0e0dd50008b181b8011bad303500116303700130370023756606a002606a0046eb8c0cc004c0bcdd50008b0b181880098169baa0011632533302a3026302c375400226060605a6ea800454cc0ad241134e6f7420616e20696e6c696e6520646174756d0016300b302c3754602460586ea800458c0b8004ccc028dd6180798151baa01b3010302a375404c98103d8798000300e30293754601e60526ea800458c0ac004ccc01cdd6180618139baa018300c3027375404698103d8798000225333024301f30263754646600200200644a666054002298103d87a80001323253330283370e6eb4c0a80080144c05ccc0b4dd399816981500119816981580125eb812f5c0266008008002605c00460580022944528111111980819805002a999813181098141baa00413223375e602060566ea8c040c0acdd5000801181618149baa00413223375e602060566ea8004008c0b0c0a4dd50021299981399baf3009302a3754002008264a666058002294454ccc0b0c0bc0044c8c8c94ccc0acc02cdd718188018a99981598058008a999815981318169baa0061533302b337129000001099b89002482026fb808528099b89480000085280a50375c606060620046eb4c0bcc0c0c0c0004dd618170008a503233001001323330010013756602460586ea800cc8cc004004018894ccc0bc00452f5bded8c02646606266ec0dd49bae302e001374c64660020026eacc0c0008894ccc0c800452f5bded8c02646606866ec0dd49bae3031001375066e052000375a606400266006006606c00460680026600600660660046062002444a66605e004200226466600800860660066644646600200200a44a66606800226606a66ec0dd48021ba60034bd6f7b630099191919299981a19baf3301a0080024c0103d8798000133039337606ea4020dd30038028a99981a19b8f008002132533303530303037375400226607466ec0dd4804981d981c1baa0010041004325333035533303900114a229405300103d87a8000130243303a374c00297ae032333001001008002222533303b0021001132333004004303f00333223233001001005225333040001133041337606ea4010dd4001a5eb7bdb1804c8c8c8c94ccc100cdd799813004001260103d8798000133045337606ea4020dd40038028a99982019b8f0080021325333041303c3043375400226608c66ec0dd4804982398221baa0010041004325333041303c00114c103d87a80001303033046375000297ae03370000e00226608a66ec0dd48011ba800133006006003375a60840066eb8c100008c110008c108004dd7181d0009bad303b001303d002133039337606ea4008dd3000998030030019bab3036003375c60680046070004606c0026eb8c0b8004dd5981780098188011129998168008a5eb804c8ccc888c8cc00400400c894ccc0cc004400c4c8cc0d4dd39981a9ba90063303537526eb8c0c8004cc0d4dd41bad30330014bd7019801801981b801181a8009bae302c0013756605a002660060066062004605e0022940dc7a441002302630273027302730273027302730270012302530263026001222323300500423002300b30253754002a666040603660446ea800448c06cccc018dd5980518121baa001375c601260486ea800cdd7180518121baa003123371090001998031bab300a302437540026eb8c024c090dd50019bae300a3024375400644646600200200644a666048002297ae01323253330223005002133027002330040040011330040040013028002302600122232533301f3019302137540022900009bad30253022375400264a66603e603260426ea80045300103d87a8000132330010013756604c60466ea8008894ccc094004530103d87a8000132323253330243371e00e6eb8c09800c4c04ccc0a4dd4000a5eb804cc014014008dd698130011814801181380099198008008021129998120008a6103d87a8000132323253330233371e00e6eb8c09400c4c048cc0a0dd3000a5eb804cc014014008dd598128011814001181300091299980e19b9000200114c0103d87980001533301c3371e0040022980103d87a800014c103d87b80003020301d375402426466446601a9213953686f756c642063616c6c206120506f6c6c4d616e6167657220696e7075742077697468204d657267655368617264732072656465656d6572003232533301f3375e004600c660486ea00112f5c02660126eb0c01cc088dd50099299981019baf004300830233754002266ebcc020c08cdd5180498119baa001300b30233754022294052819299980f980d00089919299981298140010a4c2c6eb4c098004c088dd50010a99980f980c80089919299981298140010a4c2c6eb4c098004c088dd50010a99980f980d80089919299981298140010a4c2c6eb4c098004c088dd50010b18101baa0013300a0013756601260406ea8044dd6981080098109811000980e9baa012374a90021180f8009180f180f80091191980080080191299980f0008a50132533301b3004302100214a2266006006002604200246038603a603a603a002460366038603860386038603860386038603860380024464a66602c602260306ea80044c070c064dd50008a9980ba48117436f756c64206e6f742066696e642072656465656d6572001632323300100100322533301c00114c0103d87a80001323232533301b3375e00c603a006260146604000297ae0133005005002301d0023020002301e00130033301a0024bd701ba548008dd2a400044a666024666024002941288a9980980108008800980a98091baa00d14a0602860226ea800458c04cc050008c048004c038dd50008a4c26cac64a666014600a00226464a66602060260042649319299980698040008a99980898081baa00214985854ccc034c01c00454ccc044c040dd50010a4c2c2c601c6ea800458c044004c034dd50010a99980518020008991919192999809180a80109924ca66601c601260206ea80044c8c8c8c94ccc058c0640084c9265333012300d3014375400626464a66603060360042930b1bae3019001301537540062c2c6eb4c05c004c05c008c054004c044dd50008b0b180980098098011bad3011001300d37540042c60166ea8004c8c8c8c8c8c8c94ccc038c0240044c8c94ccc050c05c0084c9265333010300b3012375400226464646464646464646464646464646464646464646464646464a66605c606200426464649318100099929998161813800899192999819181a80109924ca66605c605260606ea80044c8c8c8c94ccc0d8c0e40084c8c9263303000225333034302f303637540022646464646464a66607c60820042930b1bad303f001303f002375c607a002607a0046eb8c0ec004c0dcdd50008b18148018b1bac303700130370023035001303137540022c2c6066002605e6ea805454ccc0b0c09800454ccc0c0c0bcdd500a8a4c2c2c605a6ea8050c94ccc0acc0980044c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c94ccc11cc1280084c8c8c8c8c8c8c8c8c8c8c926304200b304100c304000d303f00e303e00f303d010303c011303b012303a013303c0143039015163048001304800230460013046002304400130440023042001304200230400013040002303e001303e002303c001303c002303a001303a002303800130380023036001303600230340013034002375c6064002605c6ea805854ccc0acc0940044c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c94ccc11cc1280084c8c8c8c8c8c8c8c8c8c8c926304200b304100c304000d303f00e303e00f303d010303c011303b012303a013303c014325333044303f00113232533304a304d002132498c0ec00458c12c004c11cdd500b0a999822181f000899192999825182680109924c60780022c6096002608e6ea805858c114dd500a8b1824000982400118230009823001182200098220011821000982100118200009820001181f000981f001181e000981e001181d000981d001181c000981c001181b000981b001181a000981a0011bae3032001302e375402c2a666056604e00226464a6660626068004264932999816981418179baa0011323232323232323232323232323232323232323253330453048002132498c0d802c58dd6982300098230011bad30440013044002375a608400260840046eb4c100004c100008dd6981f000981f001181e000981e0011bad303a001303a002375a607000260700046eb4c0d8004c0d8008dd6981a00098181baa00116163032001302e375402c2a66605666e1d200600113232533303130340021324994ccc0b4c0a0c0bcdd5000899191919299981a981c00109924c6605c00246464a666068605e606c6ea80044c8c94ccc0e8c0f400852616375c6076002606e6ea800458c0d8008dd7181a0008b1bab30360013036002375a606800260606ea80045858c0c8004c0b8dd500b0a99981599b87480200044c8c94ccc0c4c0d000852616375c6064002605c6ea805858c0b0dd500a8b1bad302f001302f002375a605a002605a0046eb4c0ac004c0ac008dd6981480098148011bad30270013027002375a604a002604a0046eb4c08c004c08c008dd698108009810801180f800980f801180e800980e801180d800980d8011bae30190013019002375a602e00260266ea80045858c054004c044dd50060a999807180400089919299980a180b80109924ca666020601660246ea80044c8c8c8c8c8c8c8c94ccc070c07c0084c8c9263010002300c00516301d001301d002375a60360026036004603200260320046eb4c05c004c04cdd50008b0b180a80098089baa00c16300f37540164a66601a6010601e6ea80044c8c8c8c94ccc054c06000852616375a602c002602c0046eb4c050004c040dd50008b12999806180398071baa0011323253330123015002149858dd6980980098079baa001162533300b3006300d375400226464a66602260280042649318028008b180900098071baa001162533300a3005300c3754002264646464a666024602a0042646493192999808180580089919299980b180c80109924c64a666026601c00226464a66603260380042649318070008b180d000980b1baa00215333013300d0011323232323232533301d3020002149858dd6980f000980f0011bad301c001301c002375a6034002602c6ea800858c050dd50008b180b80098099baa00315333010300a00115333014301337540062930b0b18089baa002300700316301300130130023011001300d37540022c4a666012600860166ea80044c8c8c8c94ccc044c05000852616375c602400260240046eb8c040004c030dd50008b1192999804980200089919299980798090010a4c2c6eb8c040004c030dd50010a999804980180089919299980798090010a4c2c6eb8c040004c030dd50010b18051baa001370e90011b8748000dc3a400844646600200200644a66601600229309919801801980780118019806800ab9a5738aae7555cf2ab9f5740ae855d11',
};

export const mkPollShardValidator = (
  params: PollShardParams,
): SpendingValidator => {
  return {
    type: pollShardValidatorData.type,
    script: applyParamsToScript(pollShardValidatorData.cborHex, [
      castPollShardParams(params),
    ]),
  };
};

export const mkPollShardValidatorFromSP = (
  params: PollShardParamsSP,
): SpendingValidator => {
  return {
    type: pollShardValidatorData.type,
    script: applyParamsToScript(pollShardValidatorData.cborHex, [
      castPollShardParams({
        pollToken: fromSystemParamsAsset(params.pollToken),
        stakingToken: fromSystemParamsAsset(params.stakingToken),
        indyAsset: fromSystemParamsAsset(params.indyAsset),
        stakingValHash: params.stakingValHash,
      }),
    ]),
  };
};
